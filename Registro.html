<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Registro | Chilean Premier League</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/Style.css" />
</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="Pagina.html">Chilean Premier League</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menu" aria-controls="menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="menu">
        <ul class="navbar-nav ms-auto" id="menuNav">
          <li class="nav-item"><a class="nav-link active" href="Registro.html">Registro</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main>
    <section>
      <h2 class="text-center mt-4 mb-4">Registro de Usuario</h2>
      <form id="formRegistro" novalidate>
        <div class="mb-3">
          <label for="nombre" class="form-label">Nombre de usuario</label>
          <input type="text" class="form-control" id="nombre" required />
        </div>
        <div class="mb-3">
          <label for="email" class="form-label">Correo electrónico</label>
          <input type="email" class="form-control" id="email" required />
        </div>
        <div class="mb-3">
          <label for="equipo" class="form-label">Equipo favorito</label>
          <select class="form-select" id="equipo" required>
            <option value="" selected disabled>Selecciona tu equipo</option>
            <option value="Coquimbo Unido">Coquimbo Unido</option>
            <option value="Palestino">Palestino</option>
            <option value="Universidad de Chile">Universidad de Chile</option>
            <option value="O'Higgins">O'Higgins</option>
            <option value="Audax Italiano">Audax Italiano</option>
            <option value="Universidad Católica">Universidad Católica</option>
            <option value="Cobresal">Cobresal</option>
            <option value="Colo Colo">Colo Colo</option>
            <option value="Huachipato">Huachipato</option>
            <option value="Ñublense">Ñublense</option>
            <option value="Unión La Calera">Unión La Calera</option>
            <option value="Everton">Everton</option>
            <option value="Deportes La Serena">Deportes La Serena</option>
            <option value="Deportes Limache">Deportes Limache</option>
            <option value="Unión Española">Unión Española</option>
            <option value="Deportes Iquique">Deportes Iquique</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="passwordReg" class="form-label">Contraseña</label>
          <input type="password" class="form-control" id="passwordReg" required />
        </div>
        <div class="mb-3">
          <label for="passwordConf" class="form-label">Confirmar contraseña</label>
          <input type="password" class="form-control" id="passwordConf" required />
        </div>
        <button type="submit" class="btn btn-primary w-100">Registrar</button>
      </form>
      <div id="mensajeRegistro" class="mt-3 text-center"></div>
    </section>
  </main>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const formRegistro = document.getElementById('formRegistro');
    const mensajeRegistro = document.getElementById('mensajeRegistro');

    function mostrarMensaje(texto, tipo = 'danger') {
      mensajeRegistro.innerHTML = `<div class="alert alert-${tipo}" role="alert">${texto}</div>`;
    }

    formRegistro.addEventListener('submit', function(e) {
      e.preventDefault();

      const nombre = document.getElementById('nombre').value.trim();
      const email = document.getElementById('email').value.trim().toLowerCase();
      const equipo = document.getElementById('equipo').value;
      const password = document.getElementById('passwordReg').value;
      const passwordConf = document.getElementById('passwordConf').value;

      if (!nombre || !email || !equipo || !password || !passwordConf) {
        mostrarMensaje('Por favor, completa todos los campos.');
        return;
      }

      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        mostrarMensaje('Correo electrónico inválido.');
        return;
      }

      if (password !== passwordConf) {
        mostrarMensaje('Las contraseñas no coinciden.');
        return;
      }

      if (password.length < 6 || !(/[A-Za-z]/.test(password) && /\d/.test(password))) {
        mostrarMensaje('La contraseña debe tener al menos 6 caracteres y contener letras y números.');
        return;
      }

      let usuarios = JSON.parse(sessionStorage.getItem('usuarios') || '[]');

      if (usuarios.some(u => u.email === email)) {
        mostrarMensaje('El correo ya está registrado.');
        return;
      }

      usuarios.push({ nombre, email, equipo, password });
      sessionStorage.setItem('usuarios', JSON.stringify(usuarios));

      formRegistro.reset();

      if (confirm(`¡Bienvenido, ${nombre}! Gracias por registrarte. ¿Quieres iniciar sesión ahora?`)) {
        window.location.href = 'Pagina.html';
      } else {
        mostrarMensaje('Registro exitoso. Ahora puedes iniciar sesión.', 'success');
      }
    });
  </script>
  <footer class="bg-dark text-white text-center p-5 mt-5">
    <div class="social-icons mb-2">
      <a href="https://www.instagram.com/chileanpremierleague" target="_blank" aria-label="Instagram" class="text-white fs-4 me-3"><i class="bi bi-instagram"></i></a>
      <a href="https://www.facebook.com/chileanpremierleague" target="_blank" aria-label="Facebook" class="text-white fs-4 me-3"><i class="bi bi-facebook"></i></a>
      <a href="https://twitter.com/chileanpremier" target="_blank" aria-label="X (Twitter)" class="text-white fs-4 me-3"><i class="bi bi-x-circle"></i></a>
      <a href="mailto:contacto@chileanpremierleague.cl" aria-label="Correo electrónico" class="text-white fs-4"><i class="bi bi-envelope-fill"></i></a>
    </div>
    <p>&copy; 2025 Chilean Premier League</p>
  </footer>
</body>
</html>